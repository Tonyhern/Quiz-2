<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Quiz Kids üß∏</title>
<style>
  body {
    font-family: "Comic Sans MS", Arial;
    text-align: center;
    background: linear-gradient(to bottom, #fff7e6, #ffe6f0);
    padding: 20px;
    overflow-x: hidden;
  }
  h1 {
    color: #ff4d6d;
    text-shadow: 2px 2px #ffd6d6;
  }
  #quiz-container {
    max-width: 480px;
    margin: auto;
    background: white;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    animation: fadeIn 0.8s;
    position: relative;
    z-index: 2;
  }
  button {
    padding: 12px 20px;
    margin: 10px;
    font-size: 18px;
    border-radius: 12px;
    cursor: pointer;
    background-color: #ffe066;
    border: none;
    transition: 0.3s;
    width: 90%;
  }
  button:hover { transform: scale(1.05); }
  button.correct { background-color: #90ee90 !important; animation: bounce 0.5s; }
  button.wrong { background-color: #ff6961 !important; animation: shake 0.5s; }
  #feedback { font-size: 20px; margin: 15px 0; }
  #score { font-size: 22px; font-weight: bold; color: #ff4d6d; }
  img { max-width: 180px; margin: 10px 0; border-radius: 12px; }
  #level { font-size: 18px; color: #444; margin-bottom: 10px; }
  #progress-container {
    width: 100%;
    background: #ddd;
    border-radius: 12px;
    margin: 15px 0;
  }
  #progress-bar {
    width: 0%;
    height: 20px;
    background: #ff4d6d;
    border-radius: 12px;
    transition: width 0.4s ease-in-out;
  }
  #lives {
    font-size: 26px;
    margin: 10px 0;
  }

  /* Animaciones */
  @keyframes bounce {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    50% { transform: translateX(5px); }
    75% { transform: translateX(-5px); }
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Confeti */
  .confetti {
    position: fixed;
    top: 0;
    width: 10px;
    height: 10px;
    background: red;
    opacity: 0.9;
    z-index: 1;
    animation: fall linear forwards;
  }
  @keyframes fall {
    to {
      transform: translateY(100vh) rotate(720deg);
      opacity: 0;
    }
  }
</style>
</head>
<body>
<h1>English Quiz Kids üß∏</h1>
<div id="quiz-container">
  <p id="level"></p>
  <div id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
  <div id="progress-container"><div id="progress-bar"></div></div>
  <p id="question"></p>
  <img id="image" src="" alt="quiz image">
  <div id="options"></div>
  <p id="feedback"></p>
  <button id="next-btn" class="hidden">Next ‚û°Ô∏è</button>
</div>
<p id="score"></p>

<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

<script>
const quiz = [
  { level: "Level 1", question: "üåû What color is the sun?", img: "https://i.imgur.com/7b8UOaT.png", options: ["Blue", "Yellow", "Green"], answer: "Yellow" },
  { level: "Level 1", question: "üê± What animal says 'meow'?", img: "https://i.imgur.com/d7wLQDi.png", options: ["Dog", "Cat", "Bird"], answer: "Cat" },
  { level: "Level 1", question: "üöó How do you say 'carro' in English?", img: "https://i.imgur.com/Uk6dX07.png", options: ["Bike", "Car", "Bus"], answer: "Car" },
  { level: "Level 2", question: "üêò Which is the largest land animal?", img: "https://i.imgur.com/6oEXW0n.png", options: ["Elephant", "Lion", "Cat"], answer: "Elephant" },
  { level: "Level 2", question: "üåô What do we see in the night sky?", img: "https://i.imgur.com/b7Q3n6p.png", options: ["Sun", "Moon", "Cloud"], answer: "Moon" },
];

let current = 0;
let score = 0;
let lives = 3;

const questionEl = document.getElementById("question");
const levelEl = document.getElementById("level");
const imageEl = document.getElementById("image");
const optionsEl = document.getElementById("options");
const feedbackEl = document.getElementById("feedback");
const nextBtn = document.getElementById("next-btn");
const scoreEl = document.getElementById("score");
const progressBar = document.getElementById("progress-bar");
const livesEl = document.getElementById("lives");

const correctSound = document.getElementById("correct-sound");
const wrongSound = document.getElementById("wrong-sound");

function shuffleArray(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function updateLives() {
  livesEl.textContent = "‚ù§Ô∏è".repeat(lives) + "ü§ç".repeat(3 - lives);
}

function loadQuestion() {
  feedbackEl.textContent = "";
  nextBtn.classList.add("hidden");
  const q = quiz[current];
  levelEl.textContent = q.level;
  questionEl.textContent = q.question;
  imageEl.src = q.img;
  optionsEl.innerHTML = "";
  shuffleArray(q.options).forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = () => checkAnswer(btn, opt);
    optionsEl.appendChild(btn);
  });
  progressBar.style.width = `${(current / quiz.length) * 100}%`;
  updateLives();
}

function checkAnswer(btn, selected) {
  const correct = quiz[current].answer;
  Array.from(optionsEl.children).forEach(b => b.disabled = true);
  if(selected === correct){
    btn.classList.add("correct");
    feedbackEl.textContent = "üéâ Great job!";
    correctSound.play();
    score++;
  } else {
    btn.classList.add("wrong");
    feedbackEl.textContent = "üòÖ Oops! You lost a ‚ù§Ô∏è";
    wrongSound.play();
    lives--;
    updateLives();
    if(lives <= 0){
      gameOver();
      return;
    }
  }
  nextBtn.classList.remove("hidden");
}

nextBtn.onclick = () => {
  current++;
  if(current < quiz.length){
    loadQuestion();
  } else {
    finishQuiz();
  }
}

function gameOver(){
  questionEl.textContent = "üíÄ Game Over!";
  imageEl.src = "";
  optionsEl.innerHTML = "";
  feedbackEl.textContent = "Better luck next time!";
  levelEl.textContent = "";
  progressBar.style.width = "100%";
  scoreEl.textContent = `Final score: ${score} / ${quiz.length}`;
  nextBtn.classList.add("hidden");
}

function finishQuiz(){
  questionEl.textContent = "üèÜ Quiz Finished!";
  imageEl.src = "";
  optionsEl.innerHTML = "";
  feedbackEl.textContent = "";
  levelEl.textContent = "";
  progressBar.style.width = "100%";
  let message = score === quiz.length 
    ? "üåü Perfect! Amazing job!" 
    : score >= quiz.length/2 
      ? "üëç Good work, keep practicing!" 
      : "üìö Don't worry, try again!";
  scoreEl.textContent = `Your score: ${score} / ${quiz.length} - ${message}`;
  nextBtn.classList.add("hidden");

  if(score >= quiz.length/2){
    launchConfetti();
  }
}

/* üéä Confeti */
function launchConfetti(){
  for(let i=0; i<80; i++){
    const confetti = document.createElement("div");
    confetti.classList.add("confetti");
    document.body.appendChild(confetti);

    const colors = ["#ff4d6d", "#ffe066", "#90ee90", "#6ec6ff", "#ffb347"];
    confetti.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
    confetti.style.left = Math.random()*100 + "vw";
    confetti.style.animationDuration = (Math.random()*2 + 2) + "s";
    confetti.style.transform = `rotate(${Math.random()*360}deg)`;

    setTimeout(() => { confetti.remove(); }, 4000);
  }
}

loadQuestion();
</script>
</body>
</html>
