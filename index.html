<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Quiz Kids üß∏</title>

<!-- üîó Manifest para PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2196f3">

<!-- üì± √çconos fallback -->
<link rel="icon" href="icon-192.png" type="image/png">
<link rel="apple-touch-icon" href="icon-512.png">

<style>
  body { font-family: Comic Sans MS, Arial; text-align: center; background-color: #fffae3; padding: 20px; }
  h1 { color: #ff6f61; }
  button { padding: 12px 25px; margin: 10px; font-size: 18px; border-radius: 12px; cursor: pointer; background-color: #ffe066; border: none; transition: 0.3s; }
  button:hover { transform: scale(1.05); }
  .hidden { display: none; }
  #quiz-container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 16px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
  #feedback { font-size: 20px; margin: 15px 0; }
  #score { font-size: 22px; font-weight: bold; color: #ff6f61; }
  img { max-width: 160px; margin: 10px 0; border-radius: 12px; }
  #level { font-size: 18px; color: #333; margin-bottom: 10px; }
  #timer { font-size: 20px; color: #d9534f; font-weight: bold; margin-bottom: 10px; }
  #lives { font-size: 22px; margin: 10px 0; color: #e63946; }
  #next-btn.correct { background-color: #38b000; color: white; }
  #next-btn.wrong { background-color: #d00000; color: white; }
</style>
</head>
<body>
<h1>English Quiz Kids üß∏</h1>
<div id="quiz-container">
  <p id="level"></p>
  <p id="timer"></p>
  <p id="lives"></p>
  <p id="question"></p>
  <img id="image" src="" alt="quiz image">
  <div id="options"></div>
  <p id="feedback"></p>
  <button id="next-btn" class="hidden">Next ‚û°Ô∏è</button>
</div>
<p id="score"></p>

<!-- sonidos -->
<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="celebration-sound" src="https://www.soundjay.com/human/sounds/applause-8.mp3"></audio>

<!-- librer√≠a confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
/* ===============================
   üß∏ English Quiz Kids Script
   =============================== */
const quiz = [
  { level: "Level 1", question: "üåû What color is the sun?", img: "https://i.imgur.com/7b8UOaT.png", options: ["Blue", "Yellow", "Green"], answer: "Yellow" },
  { level: "Level 1", question: "üê± What animal says 'meow'?", img: "https://i.imgur.com/d7wLQDi.png", options: ["Dog", "Cat", "Bird"], answer: "Cat" },
  { level: "Level 1", question: "üê∂ How do you say 'perro' in English?", img: "https://i.imgur.com/loLq3O9.png", options: ["Dog", "Cat", "Fish"], answer: "Dog" },
  { level: "Level 1", question: "üçé What fruit is red and round?", img: "https://i.imgur.com/5tZ6nLz.png", options: ["Banana", "Apple", "Orange"], answer: "Apple" },
  { level: "Level 1", question: "üôè How do you say 'gracias' in English?", img: "https://i.imgur.com/Nn4rNQo.png", options: ["Hello", "Goodbye", "Thank you"], answer: "Thank you" },
  { level: "Level 1", question: "ü¶Å What animal is the king of the jungle?", img: "https://i.imgur.com/UvYlJsz.png", options: ["Lion", "Tiger", "Elephant"], answer: "Lion" },
  { level: "Level 1", question: "üöó How do you say 'carro' in English?", img: "https://i.imgur.com/Uk6dX07.png", options: ["Bike", "Car", "Bus"], answer: "Car" },
  { level: "Level 1", question: "üåßÔ∏è What is the weather when it rains?", img: "https://i.imgur.com/I1nF4mU.png", options: ["Sunny", "Rainy", "Cloudy"], answer: "Rainy" },
  { level: "Level 1", question: "üéÇ What do we eat on birthdays?", img: "https://i.imgur.com/3xHk2Qd.png", options: ["Cake", "Bread", "Rice"], answer: "Cake" },
  { level: "Level 1", question: "üê† Which one is a fish?", img: "https://i.imgur.com/pH4A0Zo.png", options: ["Dog", "Fish", "Cat"], answer: "Fish" },

  { level: "Level 2", question: "üçå What fruit is yellow and long?", img: "https://i.imgur.com/kdVrx9C.png", options: ["Banana", "Apple", "Pear"], answer: "Banana" },
  { level: "Level 2", question: "üê∏ Which animal can jump very high?", img: "https://i.imgur.com/Mx5lNfE.png", options: ["Frog", "Dog", "Elephant"], answer: "Frog" },
  { level: "Level 2", question: "üåô What do we see in the night sky?", img: "https://i.imgur.com/b7Q3n6p.png", options: ["Sun", "Moon", "Cloud"], answer: "Moon" },
  { level: "Level 2", question: "üöå Which one is a vehicle?", img: "https://i.imgur.com/6htFChJ.png", options: ["Bus", "Tree", "Dog"], answer: "Bus" },
  { level: "Level 2", question: "‚öΩ What do we use to play football?", img: "https://i.imgur.com/G1IhQHv.png", options: ["Ball", "Book", "Chair"], answer: "Ball" },
  { level: "Level 2", question: "üêò Which is the largest land animal?", img: "https://i.imgur.com/6oEXW0n.png", options: ["Elephant", "Lion", "Cat"], answer: "Elephant" },
  { level: "Level 2", question: "üå∏ Which is a flower?", img: "https://i.imgur.com/cv3gq5d.png", options: ["Flower", "Rock", "Sun"], answer: "Flower" },
  { level: "Level 2", question: "üçì Which fruit is red and small?", img: "https://i.imgur.com/I6x4lJt.png", options: ["Strawberry", "Apple", "Banana"], answer: "Strawberry" },
  { level: "Level 2", question: "üê¶ Which one can fly?", img: "https://i.imgur.com/Msbb4Sk.png", options: ["Bird", "Dog", "Frog"], answer: "Bird" },
  { level: "Level 2", question: "üåä Where do fish live?", img: "https://i.imgur.com/1xH1i48.png", options: ["Ocean", "Tree", "Sky"], answer: "Ocean" }
];

let current = 0;
let score = 0;
let timer;
let timeLeft = 0;
let lives = 5;

const questionEl = document.getElementById("question");
const levelEl = document.getElementById("level");
const imageEl = document.getElementById("image");
const optionsEl = document.getElementById("options");
const feedbackEl = document.getElementById("feedback");
const nextBtn = document.getElementById("next-btn");
const scoreEl = document.getElementById("score");
const timerEl = document.getElementById("timer");
const livesEl = document.getElementById("lives");

const correctSound = document.getElementById("correct-sound");
const wrongSound = document.getElementById("wrong-sound");
const celebrationSound = document.getElementById("celebration-sound");

function updateLives() {
  livesEl.textContent = "‚ù§Ô∏è".repeat(lives);
}

function loadQuestion() {
  feedbackEl.textContent = "";
  nextBtn.classList.add("hidden");
  nextBtn.classList.remove("correct", "wrong");
  clearInterval(timer);

  timeLeft = quiz[current].level === "Level 1" ? 15 : 8;
  timerEl.textContent = `‚è±Ô∏è Time: ${timeLeft}s`;
  timer = setInterval(updateTimer, 1000);

  const q = quiz[current];
  levelEl.textContent = q.level;
  questionEl.textContent = q.question;
  imageEl.src = q.img;
  optionsEl.innerHTML = "";
  q.options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = () => checkAnswer(opt);
    optionsEl.appendChild(btn);
  });
  updateLives();
}

function updateTimer() {
  timeLeft--;
  timerEl.textContent = `‚è±Ô∏è Time: ${timeLeft}s`;
  if (timeLeft <= 0) {
    clearInterval(timer);
    const correct = quiz[current].answer;
    feedbackEl.textContent = `‚è∞ Time‚Äôs up! The correct answer was üëâ ${correct}`;
    wrongSound.play();
    lives--;
    updateLives();
    nextBtn.classList.add("wrong");
    nextBtn.classList.remove("hidden");
    if(lives <= 0) endGame();
  }
}

function checkAnswer(selected) {
  clearInterval(timer);
  const correct = quiz[current].answer;
  if(selected === correct){
    feedbackEl.textContent = "üéâ Great job!";
    correctSound.play();
    score++;
    nextBtn.classList.add("correct");
  } else {
    feedbackEl.textContent = `üòÖ Oops! The correct answer was üëâ ${correct}`;
    wrongSound.play();
    lives--;
    updateLives();
    nextBtn.classList.add("wrong");
    if(lives <= 0) endGame();
  }
  nextBtn.classList.remove("hidden");
}

nextBtn.onclick = () => {
  current++;
  if(current < quiz.length && lives > 0){
    loadQuestion();
  } else {
    endGame();
  }
}

function endGame() {
  clearInterval(timer);
  questionEl.textContent = "üèÜ Quiz Finished!";
  imageEl.src = "";
  optionsEl.innerHTML = "";
  feedbackEl.textContent = "";
  levelEl.textContent = "";
  timerEl.textContent = "";
  scoreEl.textContent = `Your score: ${score} / ${quiz.length}`;
  nextBtn.classList.add("hidden");

  if(lives > 0){
    celebrationSound.play();
    for (let i = 0; i < 3; i++) {
      setTimeout(() => {
        confetti({
          particleCount: 150,
          spread: 80,
          origin: { y: 0.6 }
        });
      }, i * 600);
    }
  } else {
    scoreEl.textContent += " ‚ùå Game Over!";
  }
}

loadQuestion();

/* ===============================
   ‚ö° Registro de Service Worker
   =============================== */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
    .then(() => console.log("Service Worker registrado ‚úÖ"))
    .catch(err => console.log("Error SW:", err));
}
</script>
</body>
</html>
