<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Talk & Play Time 🧸</title>
<style>
body {
  font-family: 'Comic Sans MS', Arial;
  margin: 0; padding: 0;
  text-align: center;
  background-color: #fff7e6;
}
h1, h2, p { margin: 10px 0; }
#welcome-screen, #quiz-container {
  max-width: 600px;
  margin: 50px auto;
  background: white;
  padding: 25px;
  border-radius: 16px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
  position: relative;
  overflow: hidden;
}
.slide { display: none; padding: 20px; }
.active-slide { display: block; animation: fadeIn 1s; }
button {
  padding: 14px 28px; margin: 10px;
  font-size: 18px; border-radius: 12px;
  cursor: pointer; background-color: #ffe066; border: none;
}
button:hover { transform: scale(1.1); }
#feedback { font-size: 20px; margin: 15px 0; }
#score { font-size: 22px; font-weight: bold; color: #ff6f61; }
img { max-width: 160px; margin: 10px 0; border-radius: 12px; }
#level { font-size: 18px; color: #333; margin-bottom: 10px; }
#timer { font-size: 20px; color: #d9534f; font-weight: bold; margin-bottom: 10px; }
#lives { font-size: 22px; margin: 10px 0; color: #e63946; }
#next-btn.correct { background-color: #38b000; color: white; }
#next-btn.wrong { background-color: #d00000; color: white; }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
.emoji { font-size: 50px; animation: float 3s infinite; position: relative; display: inline-block; }
@keyframes float { 0% { transform: translateY(0);} 50% { transform: translateY(-15px);} 100% { transform: translateY(0);} }
</style>
</head>
<body>

<!-- BIENVENIDA -->
<div id="welcome-screen">
  <div class="slide active-slide">
    <h1>🎉 Bienvenidos Queridos Aprendices 🎉</h1>
    <p>Prepárense para aprender inglés jugando 🧸</p>
    <div class="emoji">🌞</div>
    <div class="emoji">🐶</div>
  </div>
  <div class="slide">
    <h1>🖍️ Aprender es divertido</h1>
    <p>Responde preguntas y gana corazones ❤️</p>
    <div class="emoji">🍎</div>
    <div class="emoji">🐱</div>
  </div>
  <div class="slide">
    <h1>🏆 ¡Conviértete en un campeón del inglés!</h1>
    <p>Desafía tus conocimientos y diviértete 🎁</p>
    <div class="emoji">⚽</div>
    <div class="emoji">🌸</div>
  </div>
  <button id="start-btn" class="hidden">¡Empezar Quiz!</button>
</div>

<!-- QUIZ -->
<div id="quiz-container" class="hidden">
  <p id="level"></p>
  <p id="timer"></p>
  <p id="lives"></p>
  <p id="question"></p>
  <img id="image" src="" alt="quiz image">
  <div id="options"></div>
  <p id="feedback"></p>
  <button id="next-btn" class="hidden">Next ➡️</button>
</div>
<p id="score"></p>

<!-- SONIDOS -->
<audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
<audio id="celebration-sound" src="https://www.soundjay.com/human/sounds/applause-8.mp3"></audio>

<!-- CONFETTI -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
const quiz = [
  { level:"Level 1", question:"🌞 What color is the sun?", img:"https://i.imgur.com/7b8UOaT.png", options:["Blue","Yellow","Green"], answer:"Yellow" },
  { level:"Level 1", question:"🐱 What animal says 'meow'?", img:"https://i.imgur.com/d7wLQDi.png", options:["Dog","Cat","Bird"], answer:"Cat" },
  { level:"Level 2", question:"🍌 What fruit is yellow and long?", img:"https://i.imgur.com/kdVrx9C.png", options:["Banana","Apple","Pear"], answer:"Banana" },
  { level:"Level 2", question:"🐸 Which animal can jump very high?", img:"https://i.imgur.com/Mx5lNfE.png", options:["Frog","Dog","Elephant"], answer:"Frog" }
];

let current=0, score=0, timer, timeLeft=0, lives=5;

const slides=document.querySelectorAll(".slide");
const startBtn=document.getElementById("start-btn");
const welcomeScreen=document.getElementById("welcome-screen");
const quizContainer=document.getElementById("quiz-container");
const questionEl=document.getElementById("question");
const levelEl=document.getElementById("level");
const imageEl=document.getElementById("image");
const optionsEl=document.getElementById("options");
const feedbackEl=document.getElementById("feedback");
const nextBtn=document.getElementById("next-btn");
const scoreEl=document.getElementById("score");
const timerEl=document.getElementById("timer");
const livesEl=document.getElementById("lives");
const correctSound=document.getElementById("correct-sound");
const wrongSound=document.getElementById("wrong-sound");
const celebrationSound=document.getElementById("celebration-sound");

// DIAPOSITIVAS
let currentSlide=0;
function showSlide(i){ slides.forEach(s=>s.classList.remove("active-slide")); slides[i].classList.add("active-slide"); }
const slideInterval=setInterval(()=>{
  currentSlide++;
  if(currentSlide<slides.length){ showSlide(currentSlide); } 
  else { clearInterval(slideInterval); startBtn.classList.remove("hidden"); }
}, 3000);

startBtn.onclick = ()=>{
  welcomeScreen.classList.add("hidden"); quizContainer.classList.remove("hidden"); loadQuestion();
}

// FUNCIONES QUIZ
function updateLives(){ livesEl.textContent="❤️".repeat(lives); }

function loadQuestion(){
  feedbackEl.textContent="";
  nextBtn.classList.add("hidden"); nextBtn.classList.remove("correct","wrong");
  clearInterval(timer);
  timeLeft=quiz[current].level==="Level 1"?15:8;
  timerEl.textContent=`⏱️ Time: ${timeLeft}s`;
  timer=setInterval(updateTimer,1000);
  const q=quiz[current];
  levelEl.textContent=q.level;
  questionEl.textContent=q.question;
  imageEl.src=q.img;
  optionsEl.innerHTML="";
  q.options.forEach(opt=>{
    const btn=document.createElement("button");
    btn.textContent=opt;
    btn.onclick=()=>checkAnswer(opt);
    optionsEl.appendChild(btn);
  });
  updateLives();
}

function updateTimer(){
  timeLeft--; timerEl.textContent=`⏱️ Time: ${timeLeft}s`;
  if(timeLeft<=0){
    clearInterval(timer);
    feedbackEl.textContent=`⏰ Time’s up! Correct 👉 ${quiz[current].answer}`;
    wrongSound.play(); lives--; updateLives();
    nextBtn.classList.add("wrong"); nextBtn.classList.remove("hidden");
    if(lives<=0) endGame();
  }
}

function checkAnswer(selected){
  clearInterval(timer);
  const correct=quiz[current].answer;
  if(selected===correct){ feedbackEl.textContent="🎉 Great job!"; correctSound.play(); score++; nextBtn.classList.add("correct"); }
  else { feedbackEl.textContent=`😅 Oops! Correct 👉 ${correct}`; wrongSound.play(); lives--; updateLives(); nextBtn.classList.add("wrong"); if(lives<=0) endGame(); }
  nextBtn.classList.remove("hidden");
}

nextBtn.onclick=()=>{
  current++;
  if(current<quiz.length && lives>0) loadQuestion();
  else endGame();
}

function endGame(){
  clearInterval(timer);
  questionEl.textContent="🏆 Quiz Finished!";
  imageEl.src=""; optionsEl.innerHTML=""; feedbackEl.textContent=""; levelEl.textContent=""; timerEl.textContent="";
  scoreEl.textContent=`Your score: ${score} / ${quiz.length}`;
  nextBtn
